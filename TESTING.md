# 🧪 测试交互式抓取功能

## 快速测试步骤

### 测试 1: 基本流程

1. **启动应用**
   ```powershell
   npm run electron:dev
   ```

2. **输入测试URL**
   ```
   https://www.baidu.com
   或
   https://www.bilibili.com
   ```

3. **开始抓取**
   - 点击"🚀 开始抓取"按钮
   - 观察是否打开新窗口
   - 检查主窗口按钮是否变为"⏸️ 停止抓取"

4. **观察资源收集**
   - 在新窗口中浏览网页
   - 回到主窗口查看资源列表
   - 状态栏应显示: `抓取中 - 已收集 X 个资源`

5. **停止抓取**
   - 点击"⏸️ 停止抓取"按钮
   - 新窗口应自动关闭
   - 资源列表保留所有收集的资源

### 测试 2: 实时更新

1. 开始抓取任意网站
2. 在抓取窗口中点击不同的链接
3. 观察主窗口资源列表是否实时增加
4. 状态栏数字应该实时变化

### 测试 3: 资源分类

抓取一个完整网站后，检查左侧筛选面板：

```
预期结果:
📷 图片 (XX)    - 应该有数字
📝 脚本 (XX)    - 应该有数字  
🎨 样式 (XX)    - 应该有数字
📦 其他 (XX)    - 可能有数字
```

### 测试 4: 资源去重

1. 开始抓取
2. 在抓取窗口中刷新页面多次
3. 检查资源列表中是否有重复的URL
4. 应该没有重复（相同URL只出现一次）

### 测试 5: 停止和重新开始

1. 开始抓取 → 收集一些资源 → 停止抓取
2. 清空资源列表
3. 输入新的URL
4. 再次开始抓取
5. 应该能正常工作

---

## 推荐测试网站

### 简单测试
- ✅ https://www.baidu.com (快速测试)
- ✅ https://www.bilibili.com (资源丰富)

### Cocos Creator 游戏（如果能找到）
- 🎮 各类 H5 小游戏
- 🎮 Cocos Creator 官方示例

### 资源密集型网站
- 📷 图片网站 (测试图片抓取)
- 🎵 音乐播放器 (测试音频抓取)

---

## 预期行为

### ✅ 正确的表现

1. **开始抓取后**:
   - 打开新的浏览器窗口
   - 主窗口按钮变为"停止抓取"
   - 按钮有红色渐变和脉冲动画
   - 显示蓝色脉冲点和提示文字

2. **抓取过程中**:
   - 资源列表实时更新
   - 状态栏数字递增
   - 可以在抓取窗口中正常浏览

3. **停止抓取后**:
   - 抓取窗口自动关闭
   - 按钮变回"开始抓取"
   - 资源列表保留
   - 状态栏显示总数

4. **资源列表**:
   - 每个资源显示类型图标
   - 显示文件名和大小
   - 可以勾选和筛选
   - 可以复制链接

### ❌ 需要注意的问题

1. **重复抓取**:
   - 如果已经在抓取，不应该能再次点击开始
   - 应该提示"抓取已在进行中"

2. **窗口管理**:
   - 手动关闭抓取窗口应该自动停止抓取
   - 不应该有窗口泄漏

3. **资源重复**:
   - 相同 URL 不应该出现多次
   - 刷新页面不应该导致重复

4. **状态同步**:
   - 主窗口和抓取窗口状态应该同步
   - 停止后状态应该正确重置

---

## 已知限制

### 当前版本

1. **单次抓取**: 一次只能抓取一个网站
2. **内存占用**: 抓取大量资源可能占用较多内存
3. **下载功能**: 目前是模拟下载，未实际保存文件

### 待开发功能

- [ ] 真实文件下载
- [ ] 下载进度条
- [ ] 资源预览
- [ ] 暂停/恢复抓取
- [ ] 抓取历史记录

---

## 调试技巧

### 查看控制台日志

1. 主窗口按 `F12` 打开开发者工具
2. 查看 Console 标签
3. 应该能看到资源收集的日志

### 查看网络请求

1. 在抓取窗口中按 `F12`
2. 切换到 Network 标签
3. 观察实际的网络请求

### 检查资源数据

在主窗口控制台中输入:
```javascript
// 查看所有资源
window.resources

// 查看第一个资源
window.resources[0]
```

---

## 问题反馈

测试中发现问题？

1. **截图**: 截取错误界面
2. **控制台**: 复制控制台的错误信息
3. **步骤**: 详细描述复现步骤
4. **环境**: Node版本、系统版本等

提交到: [GitHub Issues](https://github.com/yourusername/webcat/issues)

---

## 成功标志

如果你看到以下现象，说明功能正常：

✅ 点击"开始抓取"后立即打开新窗口
✅ 主窗口实时显示收集的资源
✅ 状态栏数字持续增长
✅ 点击"停止抓取"后窗口关闭
✅ 资源列表中有各种类型的资源
✅ 可以正常筛选和选择资源

**恭喜！交互式抓取功能工作正常！** 🎉
